---
sidebar: sidebar 
permalink: task-deploy-compliance-onprem.html 
keywords: cloud compliance, data sense, get started, deploy cloud data sense, outbound internet, endpoints, cloud compliance internet, web browser connectivity, cloud compliance access, privacy, compliance, on-premises 
summary: 'Completare alcuni passaggi per installare la classificazione BlueXP su un host Linux nella rete o su un host Linux nel cloud con accesso a Internet. Come parte di questa installazione, sarà necessario implementare manualmente l"host Linux nella rete o nel cloud.' 
---
= Installare la classificazione BlueXP su un host con accesso a Internet
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Completare alcuni passaggi per installare la classificazione BlueXP su un host Linux nella rete o su un host Linux nel cloud con accesso a Internet. Come parte di questa installazione, sarà necessario implementare manualmente l'host Linux nella rete o nel cloud.

L'installazione on-premise potrebbe essere una buona opzione se si preferisce eseguire la scansione dei sistemi ONTAP on-premise utilizzando un'istanza di classificazione BlueXP che si trova anche on-premise, ma questo non è un requisito. Il software funziona esattamente allo stesso modo, indipendentemente dal metodo di installazione scelto.

Lo script di installazione della classificazione BlueXP inizia verificando se il sistema e l'ambiente soddisfano i prerequisiti richiesti. Se tutti i prerequisiti sono soddisfatti, viene avviata l'installazione. Se si desidera verificare i prerequisiti indipendentemente dall'esecuzione dell'installazione di classificazione BlueXP, è possibile scaricare un pacchetto software separato che esegue solo i prerequisiti. link:task-test-linux-system.html["Scopri come verificare se il tuo host Linux è pronto per installare la classificazione BlueXP"].

L'installazione tipica su un host Linux _in sede_ ha i seguenti componenti e connessioni.

image:diagram_deploy_onprem_overview.png["Un diagramma dei componenti di rete e BlueXP richiesti e delle relative connessioni."]

L'installazione tipica su un host Linux _nel cloud_ ha i seguenti componenti e connessioni.

image:diagram_deploy_onprem_cloud_instance.png["Un diagramma dei componenti di rete e BlueXP richiesti e delle relative connessioni."]

Per configurazioni molto grandi in cui si eseguono scansioni di petabyte di dati, è possibile includere più host per fornire ulteriore potenza di elaborazione. Quando si utilizzano più sistemi host, il sistema primario è denominato _nodo Manager_ e i sistemi aggiuntivi che forniscono potenza di elaborazione aggiuntiva sono denominati _nodi scanner_.

Nota: È anche possibile link:task-deploy-compliance-dark-site.html["Installare la classificazione BlueXP in un sito on-premise che non dispone di accesso a Internet"] per siti completamente sicuri.



== Avvio rapido

Inizia subito seguendo questi passaggi o scorri verso il basso fino alle sezioni rimanenti per ottenere dettagli completi.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png["Uno"] Creare un connettore
[role="quick-margin-para"]
Se non si dispone già di un connettore, https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-on-prem.html["Implementare il connettore on-premise"^] Su un host Linux nella rete o su un host Linux nel cloud.

[role="quick-margin-para"]
Puoi anche creare un connettore con il tuo cloud provider. Vedere https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-aws.html["Creazione di un connettore in AWS"^], https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-azure.html["Creazione di un connettore in Azure"^], o. https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-google.html["Creazione di un connettore in GCP"^].

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png["Due"] Esaminare i prerequisiti
[role="quick-margin-para"]
Assicurarsi che l'ambiente soddisfi i prerequisiti. Ciò include l'accesso a Internet in uscita per l'istanza, la connettività tra il connettore e la classificazione BlueXP sulla porta 443 e altro ancora. <<Abilitare l'accesso a Internet in uscita dalla classificazione BlueXP,Consulta l'elenco completo>>.

[role="quick-margin-para"]
È inoltre necessario un sistema Linux che soddisfi i requisiti di <<Preparare il sistema host Linux,requisiti seguenti>>.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png["Tre"] Scarica e implementa la classificazione BlueXP
[role="quick-margin-para"]
Scarica il software di classificazione Cloud BlueXP dal sito di supporto NetApp e copia il file di installazione sull'host Linux che intendi utilizzare. Quindi, avviare l'installazione guidata e seguire le istruzioni per implementare l'istanza di classificazione BlueXP.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-4.png["Quattro"] Iscriviti al servizio di classificazione BlueXP
[role="quick-margin-para"]
I primi 1 TB di dati che la classificazione BlueXP scansiona in BlueXP sono gratuiti per 30 giorni. Per continuare a eseguire la scansione dei dati dopo tale data, è necessario un abbonamento al tuo provider cloud Marketplace o una licenza BYOL di NetApp.



== Creare un connettore

Prima di installare e utilizzare la classificazione BlueXP, è necessario un connettore BlueXP. Nella maggior parte dei casi, probabilmente si dispone di un connettore configurato prima di tentare di attivare la classificazione BlueXP, perché la maggior parte https://docs.netapp.com/us-en/bluexp-setup-admin/concept-connectors.html#when-a-connector-is-required["Le funzionalità di BlueXP richiedono un connettore"], ma in alcuni casi è necessario impostarne uno ora.

Per crearne uno nel tuo ambiente di cloud provider, consulta la sezione https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-aws.html["Creazione di un connettore in AWS"^], https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-azure.html["Creazione di un connettore in Azure"^], o. https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-google.html["Creazione di un connettore in GCP"^].

Esistono alcuni scenari in cui è necessario utilizzare un connettore implementato in uno specifico cloud provider:

* Quando si esegue la scansione dei dati in Cloud Volumes ONTAP in AWS, Amazon FSX per ONTAP o nei bucket AWS S3, si utilizza un connettore in AWS.
* Quando si esegue la scansione dei dati in Cloud Volumes ONTAP in Azure o in Azure NetApp Files, si utilizza un connettore in Azure.
+
Per Azure NetApp Files, deve essere implementato nella stessa regione dei volumi che si desidera sottoporre a scansione.

* Quando si esegue la scansione dei dati in Cloud Volumes ONTAP in GCP, si utilizza un connettore in GCP.


I sistemi ONTAP on-premise, le condivisioni di file non NetApp, lo storage a oggetti S3 generico, i database, le cartelle OneDrive, gli account SharePoint e gli account Google Drive possono essere sottoposti a scansione utilizzando uno di questi connettori cloud.

Nota: È anche possibile https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-on-prem.html["Implementare il connettore on-premise"^] Su un host Linux nella rete o su un host Linux nel cloud. Alcuni utenti che intendono installare BlueXP classification on-premise possono anche scegliere di installare il connettore on-premise.

Come puoi vedere, potrebbero esserci alcune situazioni in cui devi utilizzare https://docs.netapp.com/us-en/bluexp-setup-admin/concept-connectors.html#multiple-connectors["Connettori multipli"].

Quando si installa la classificazione BlueXP, è necessario l'indirizzo IP o il nome host del sistema di connessione. Queste informazioni saranno disponibili se il connettore è stato installato nella propria sede. Se il connettore è implementato nel cloud, è possibile trovare queste informazioni dalla console BlueXP: Fare clic sull'icona della Guida, selezionare *Support* e fare clic su *BlueXP Connector*.



== Preparare il sistema host Linux

Il software di classificazione BlueXP deve essere eseguito su un host che soddisfi requisiti specifici del sistema operativo, requisiti di RAM, requisiti software e così via. L'host Linux può trovarsi nella rete o nel cloud.

Assicurarsi che sia possibile mantenere in esecuzione la classificazione BlueXP. Il sistema di classificazione BlueXP deve rimanere attivo per eseguire una scansione continua dei dati.

* La classificazione BlueXP non è supportata su un host condiviso con altre applicazioni: L'host deve essere un host dedicato.
* Quando si costruisce il sistema host in sede, è possibile scegliere tra tre dimensioni del sistema a seconda delle dimensioni del set di dati che si prevede di sottoporre a scansione di classificazione BlueXP.
+
[cols="18,18,26,30"]
|===
| Dimensioni del sistema | CPU | RAM (la memoria di swap deve essere disattivata) | Disco 


| *Grande* | 16 CPU | 64 GB DI RAM | 500 GiB SSD ON /, OR
- 100 GiB disponibile su /opt
- 395 GiB disponibile su /var/lib/docker
- 5 GiB su /tmp 


| *Medio* | 8 CPU | 32 GB DI RAM | 200 GiB SSD ON /, OR
- 50 GiB disponibile su /opt
- 145 GiB disponibile su /var/lib/docker
- 5 GiB su /tmp 


| *Piccolo* | 8 CPU | 16 GB DI RAM | 100 GiB SSD ON /, OR
- 50 GiB disponibile su /opt
- 45 GiB disponibile su /var/lib/docker
- 5 GiB su /tmp 
|===
+
Si noti che l'utilizzo di questi sistemi più piccoli presenta delle limitazioni. Vedere link:concept-cloud-compliance.html#using-a-smaller-instance-type["Utilizzando un tipo di istanza più piccolo"] per ulteriori informazioni.

* Quando si implementa un'istanza di calcolo nel cloud per l'installazione della classificazione BlueXP, si consiglia di utilizzare un sistema che soddisfi i requisiti di sistema "grandi" indicati in precedenza:
+
** *Tipo di istanza AWS EC2*: Si consiglia "m6i.4xlarge". link:reference-instance-types.html#aws-instance-types["Vedere altri tipi di istanze AWS"^].
** *Dimensione delle macchine virtuali Azure*: Si consiglia "Standard_D16s_v3". link:reference-instance-types.html#azure-instance-types["Vedere altri tipi di istanze di Azure"^].
** *Tipo di macchina GCP*: Si consiglia "n2-standard-16". link:reference-instance-types.html#gcp-instance-types["Vedere altri tipi di istanze GCP"^].


* *UNIX folder permissions*: Sono richieste le seguenti autorizzazioni minime per UNIX:
+
[cols="25,25"]
|===
| Cartella | Permessi minimi 


| /tmp | `rwxrwxrwt` 


| /opz | `rwxr-xr-x` 


| /var/lib/docker | `rwx------` 


| /user/lib/systemd/system | `rwxr-xr-x` 
|===
* *Sistema operativo*:
+
** I seguenti sistemi operativi richiedono l'utilizzo del motore dei container Docker:
+
*** Red Hat Enterprise Linux versione 7.8 e 7.9 - la versione del kernel Linux deve essere 4.0 o superiore
*** CentOS versione 7.8 e 7.9 - la versione del kernel Linux deve essere 4.0 o superiore
*** Rocky Linux 9 (richiede la classificazione BlueXP versione 1,24 o superiore)
*** Ubuntu 22,04 (richiede la classificazione BlueXP versione 1,23 o superiore)






* *Red Hat Subscription Management*: L'host deve essere registrato con Red Hat Subscription Management. Se non è registrato, il sistema non può accedere ai repository per aggiornare il software di terze parti richiesto durante l'installazione.
* *Software aggiuntivo*: È necessario installare il seguente software sull'host prima di installare la classificazione BlueXP:
+
** A seconda del sistema operativo in uso, è necessario installare uno dei motori container:
+
*** Docker Engine versione 19.3.1 o superiore. https://docs.docker.com/engine/install/["Visualizzare le istruzioni di installazione"^].
+
https://youtu.be/Ogoufel1q6c["Guarda questo video"^] Per una rapida dimostrazione dell'installazione di Docker su CentOS.



** Python versione 3,6 o superiore. https://www.python.org/downloads/["Visualizzare le istruzioni di installazione"^].


* *Considerazioni su Firewalld*: Se si intende utilizzare `firewalld`, Si consiglia di abilitarla prima di installare la classificazione BlueXP. Eseguire i seguenti comandi per configurare `firewalld` In modo che sia compatibile con la classificazione BlueXP:
+
....
firewall-cmd --permanent --add-service=http
firewall-cmd --permanent --add-service=https
firewall-cmd --permanent --add-port=80/tcp
firewall-cmd --permanent --add-port=8080/tcp
firewall-cmd --permanent --add-port=443/tcp
firewall-cmd --reload
....
+
Se si prevede di utilizzare altri host di classificazione BlueXP come nodi scanner, aggiungere queste regole al sistema primario in questo momento:

+
....
firewall-cmd --permanent --add-port=2377/tcp
firewall-cmd --permanent --add-port=7946/udp
firewall-cmd --permanent --add-port=7946/tcp
firewall-cmd --permanent --add-port=4789/udp
....
+
Devi riavviare Docker o Podman ogni volta che abiliti o aggiorni il sistema `firewalld` impostazioni.




NOTE: L'indirizzo IP del sistema host di classificazione BlueXP non può essere modificato dopo l'installazione.



== Abilitare l'accesso a Internet in uscita dalla classificazione BlueXP

La classificazione BlueXP richiede l'accesso a Internet in uscita. Se la rete fisica o virtuale utilizza un server proxy per l'accesso a Internet, assicurarsi che l'istanza di classificazione BlueXP disponga dell'accesso a Internet in uscita per contattare i seguenti endpoint.

[cols="43,57"]
|===
| Endpoint | Scopo 


| https://api.bluexp.netapp.com | Comunicazione con il servizio BlueXP, che include gli account NetApp. 


| https://netapp-cloud-account.auth0.com https://auth0.com | Comunicazione con il sito Web BlueXP per l'autenticazione utente centralizzata. 


| https://support.compliance.api.bluexp.netapp.com/ https://hub.docker.com https://auth.docker.io https://registry-1.docker.io https://index.docker.io/ https://dseasb33srnrn.cloudfront.net/ https://production.cloudflare.docker.com/ | Fornisce accesso a immagini software, manifesti, modelli e per inviare registri e metriche. 


| https://support.compliance.api.bluexp.netapp.com/ | Consente a NetApp di eseguire lo streaming dei dati dai record di audit. 


| https://github.com/docker https://download.docker.com | Fornisce pacchetti prerequisiti per l'installazione di docker. 


| http://mirror.centos.org http://mirrorlist.centos.org http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-2.107-3.el7.noarch.rpm | Fornisce pacchetti prerequisiti per l'installazione di CentOS. 


| \http://packages.ubuntu.com/
\http://archive.ubuntu.com | Fornisce pacchetti prerequisiti per l'installazione di Ubuntu. 
|===


== Verificare che tutte le porte richieste siano attivate

Assicurarsi che tutte le porte richieste siano aperte per la comunicazione tra il connettore, la classificazione BlueXP, Active Directory e le origini dati.

[cols="25,25,50"]
|===
| Tipo di connessione | Porte | Descrizione 


| Connettore <> classificazione BlueXP | 8080 (TCP), 443 (TCP) e 80 | Il firewall o le regole di routing per il connettore devono consentire il traffico in entrata e in uscita sulla porta 443 da e verso l'istanza di classificazione BlueXP. Assicurarsi che la porta 8080 sia aperta in modo da visualizzare l'avanzamento dell'installazione in BlueXP. 


| Connettore <> ONTAP cluster (NAS) | 443 (TCP)  a| 
BlueXP rileva i cluster ONTAP utilizzando HTTPS. Se si utilizzano criteri firewall personalizzati, questi devono soddisfare i seguenti requisiti:

* L'host del connettore deve consentire l'accesso HTTPS in uscita attraverso la porta 443. Se il connettore si trova nel cloud, tutte le comunicazioni in uscita sono consentite dal firewall predefinito o dalle regole di routing.
* Il cluster ONTAP deve consentire l'accesso HTTPS in entrata attraverso la porta 443. Il criterio firewall predefinito "mgmt" consente l'accesso HTTPS in entrata da tutti gli indirizzi IP. Se questo criterio predefinito è stato modificato o se è stato creato un criterio firewall personalizzato, è necessario associare il protocollo HTTPS a tale criterio e abilitare l'accesso dall'host del connettore.




| Classificazione BlueXP <> cluster ONTAP  a| 
* Per NFS - 111 (TCP/UDP) e 2049 (TCP/UDP)
* Per CIFS - 139 (TCP/UDP) e 445 (TCP/UDP)

 a| 
La classificazione BlueXP richiede una connessione di rete a ogni subnet Cloud Volumes ONTAP o sistema ONTAP on-premise. I firewall o le regole di routing per Cloud Volumes ONTAP devono consentire le connessioni in entrata dall'istanza di classificazione BlueXP.

Assicurarsi che queste porte siano aperte per l'istanza di classificazione BlueXP:

* Per NFS - 111 e 2049
* Per CIFS - 139 e 445


I criteri di esportazione dei volumi NFS devono consentire l'accesso dall'istanza di classificazione BlueXP.



| Classificazione BlueXP <> Active Directory | 389 (TCP E UDP), 636 (TCP), 3268 (TCP) E 3269 (TCP)  a| 
È necessario che sia già stata configurata una Active Directory per gli utenti della società. Inoltre, la classificazione BlueXP richiede le credenziali di Active Directory per eseguire la scansione dei volumi CIFS.

È necessario disporre delle informazioni per Active Directory:

* DNS Server IP Address (Indirizzo IP server DNS) o Multiple IP Address (indirizzi IP multipli)
* Nome utente e password del server
* Domain Name (Nome di Active Directory) (Nome di dominio)
* Se si utilizza o meno LDAP sicuro (LDAPS)
* Porta server LDAP (generalmente 389 per LDAP e 636 per LDAP sicuro)


|===
Se si utilizzano più host di classificazione BlueXP per fornire ulteriore potenza di elaborazione per eseguire la scansione delle origini dati, è necessario attivare porte/protocolli aggiuntivi. link:task-deploy-compliance-onprem.html#add-scanner-nodes-to-an-existing-deployment["Vedere i requisiti aggiuntivi per le porte"].



== Installare la classificazione BlueXP sull'host Linux

Per le configurazioni tipiche, il software viene installato su un singolo sistema host. <<Installazione a host singolo per configurazioni tipiche,Consulta questa procedura>>.

image:diagram_deploy_onprem_single_host_internet.png["Un diagramma che mostra la posizione delle origini dati che è possibile analizzare quando si utilizza una singola istanza di classificazione BlueXP implementata on-premise con accesso a Internet."]

Per configurazioni molto grandi in cui si eseguono scansioni di petabyte di dati, è possibile includere più host per fornire ulteriore potenza di elaborazione. <<Installazione multi-host per configurazioni di grandi dimensioni,Consulta questa procedura>>.

image:diagram_deploy_onprem_multi_host_internet.png["Un diagramma che mostra la posizione delle origini dati che è possibile analizzare quando si utilizzano più istanze di classificazione BlueXP distribuite on-premise con accesso a Internet."]

Vedere <<Preparare il sistema host Linux,Preparazione del sistema host Linux>> e. <<Abilitare l'accesso a Internet in uscita dalla classificazione BlueXP,Verifica dei prerequisiti>> Per l'elenco completo dei requisiti prima di implementare la classificazione BlueXP.

Gli aggiornamenti al software di classificazione BlueXP sono automatizzati finché l'istanza dispone di connettività Internet.


NOTE: La classificazione BlueXP non è attualmente in grado di eseguire la scansione dei bucket S3, Azure NetApp Files o FSX per ONTAP quando il software è installato on-premise. In questi casi, è necessario implementare un connettore separato e un'istanza della classificazione BlueXP nel cloud e. https://docs.netapp.com/us-en/bluexp-setup-admin/concept-connectors.html#multiple-connectors["Passare da un connettore all'altro"^] per le diverse origini dati.



=== Installazione a host singolo per configurazioni tipiche

Esaminare i requisiti e seguire questi passaggi quando si installa il software di classificazione BlueXP su un singolo host on-premise.

https://youtu.be/rFpmekdbORc["Guarda questo video"^] Per scoprire come installare la classificazione BlueXP.

Tenere presente che tutte le attività di installazione vengono registrate durante l'installazione della classificazione BlueXP. In caso di problemi durante l'installazione, è possibile visualizzare il contenuto del registro di controllo dell'installazione. È scritto a. `/opt/netapp/install_logs/`. link:task-audit-data-sense-actions.html#access-the-log-file["Per ulteriori informazioni, fare clic qui"].

.Di cosa hai bisogno
* Verificare che il sistema Linux soddisfi i requisiti <<Preparare il sistema host Linux,requisiti dell'host>>.
* Verificare che sul sistema siano installati i due pacchetti software prerequisiti (Docker Engine e Python 3).
* Assicurarsi di disporre dei privilegi di root sul sistema Linux.
* Se si utilizza un proxy per l'accesso a Internet:
+
** Sono necessarie le informazioni sul server proxy (indirizzo IP o nome host, porta di connessione, schema di connessione: https o http, nome utente e password).
** Se il proxy sta eseguendo l'intercettazione TLS, è necessario conoscere il percorso del sistema Linux di classificazione BlueXP in cui sono memorizzati i certificati della CA TLS.
** Il proxy deve essere non trasparente, al momento non supportiamo proxy trasparenti.
** L'utente deve essere un utente locale. Gli utenti di dominio non sono supportati.


* Verificare che l'ambiente offline soddisfi i requisiti <<Abilitare l'accesso a Internet in uscita dalla classificazione BlueXP,permessi e connettività>>.


.Fasi
. Scaricare il software di classificazione BlueXP dal https://mysupport.netapp.com/site/products/all/details/cloud-data-sense/downloads-tab/["Sito di supporto NetApp"^]. Il file da selezionare è *DATASENSE-INSTALLER-<version>.tar.gz*.
. Copiare il file del programma di installazione sull'host Linux che si desidera utilizzare (utilizzando `scp` o qualche altro metodo).
. Decomprimere il file del programma di installazione sul computer host, ad esempio:
+
[source, cli]
----
tar -xzf DATASENSE-INSTALLER-V1.25.0.tar.gz
----
. In BlueXP, selezionare *Governance > Classification*.
. Fare clic su *Activate Data Sense* (attiva rilevamento dati).
+
image:screenshot_cloud_compliance_deploy_start.png["Una schermata che mostra la selezione del pulsante per attivare la classificazione BlueXP."]

. A seconda che si stia installando la classificazione BlueXP su un'istanza preparata nel cloud o su un'istanza preparata in sede, fare clic sul pulsante *Deploy* appropriato per avviare l'installazione della classificazione BlueXP.
+
image:screenshot_cloud_compliance_deploy_onprem.png["Una schermata che mostra la selezione del pulsante per implementare la classificazione BlueXP su un computer nel cloud o in sede."]

. Viene visualizzata la finestra di dialogo _Deploy Data Sense on Premise_. Copiare il comando fornito (ad esempio: `sudo ./install.sh -a 12345 -c 27AG75 -t 2198qq`) e incollarlo in un file di testo per poterlo utilizzare in un secondo momento. Quindi fare clic su *Chiudi* per chiudere la finestra di dialogo.
. Sul computer host, immettere il comando copiato e seguire una serie di prompt oppure fornire il comando completo che include tutti i parametri richiesti come argomenti della riga di comando.
+
Tenere presente che il programma di installazione esegue una pre-verifica per assicurarsi che i requisiti di sistema e di rete siano stati soddisfatti per una corretta installazione. https://youtu.be/_RCYpuLXiV0["Guarda questo video"^] comprendere i messaggi di pre-controllo e le implicazioni.

+
[cols="50a,50"]
|===
| Inserire i parametri come richiesto: | Immettere il comando completo: 


 a| 
.. Incollare il comando copiato dal punto 7:
`sudo ./install.sh -a <account_id> -c <client_id> -t <user_token>`
+
Se si esegue l'installazione su un'istanza cloud (non on-premise), aggiungere `--manual-cloud-install <cloud_provider>`.

.. Immettere l'indirizzo IP o il nome host del computer host di classificazione BlueXP in modo che sia possibile accedervi dal sistema di connettori.
.. Inserire l'indirizzo IP o il nome host del computer host BlueXP Connector in modo che sia possibile accedervi dal sistema di classificazione BlueXP.
.. Inserire i dettagli del proxy come richiesto. Se il connettore BlueXP utilizza già un proxy, non è necessario inserire nuovamente queste informazioni, poiché la classificazione BlueXP utilizzerà automaticamente il proxy utilizzato dal connettore.

| In alternativa, è possibile creare l'intero comando in anticipo, fornendo i parametri host e proxy necessari:
`sudo ./install.sh -a <account_id> -c <client_id> -t <user_token> --host <ds_host> --manager-host <cm_host> --manual-cloud-install <cloud_provider> --proxy-host <proxy_host> --proxy-port <proxy_port> --proxy-scheme <proxy_scheme> --proxy-user <proxy_user> --proxy-password <proxy_password> --cacert-folder-path <ca_cert_dir>` 
|===
+
Valori variabili:

+
** _Account_id_ = ID account NetApp
** _Client_id_ = ID client del connettore (aggiungere il suffisso "client" all'ID client se non è già presente)
** _User_token_ = token di accesso utente JWT
** _Ds_host_ = indirizzo IP o nome host del sistema Linux di classificazione BlueXP.
** _Cm_host_ = indirizzo IP o nome host del sistema BlueXP Connector.
** _Cloud_provider_ = durante l'installazione su un'istanza di cloud, immettere "AWS", "Azure" o "Gcp" a seconda del provider di cloud.
** _Proxy_host_ = IP o nome host del server proxy se l'host si trova dietro un server proxy.
** _Porta_proxy_ = porta per la connessione al server proxy (impostazione predefinita: 80).
** _Schema_proxy_ = Schema di connessione: https o http (http predefinito).
** _Proxy_user_ = utente autenticato per la connessione al server proxy, se è richiesta l'autenticazione di base. L'utente deve essere un utente locale - gli utenti di dominio non sono supportati.
** _Proxy_password_ = Password per il nome utente specificato.
** _Ca_cert_dir_ = percorso del sistema Linux di classificazione BlueXP contenente bundle di certificati CA TLS aggiuntivi. Richiesto solo se il proxy sta eseguendo l'intercettazione TLS.




.Risultato
Il programma di installazione della classificazione BlueXP installa i pacchetti, registra l'installazione e installa la classificazione BlueXP. L'installazione può richiedere da 10 a 20 minuti.

Se la connessione tra il computer host e l'istanza del connettore avviene tramite la porta 8080, l'avanzamento dell'installazione viene visualizzato nella scheda classificazione BlueXP in BlueXP.

.Cosa c'è di nuovo
Dalla pagina di configurazione è possibile selezionare le origini dati da sottoporre a scansione.

Puoi anche farlo link:task-licensing-datasense.html["Impostare la licenza per la classificazione BlueXP"] a questo punto. Non ti verrà addebitato alcun costo fino al termine della prova gratuita di 30 giorni.



=== Aggiunta di nodi scanner a un'implementazione esistente

È possibile aggiungere altri nodi dello scanner se si ha bisogno di una maggiore potenza di elaborazione della scansione per eseguire la scansione delle origini dati. È possibile aggiungere i nodi dello scanner subito dopo l'installazione del nodo manager oppure aggiungere un nodo scanner in un secondo momento. Ad esempio, se si comprende che la quantità di dati in una delle origini dati è raddoppiata o triplicata dopo 6 mesi, è possibile aggiungere un nuovo nodo scanner per agevolare la scansione dei dati.

Esistono due modi per aggiungere nodi scanner aggiuntivi:

* aggiungere un nodo per facilitare la scansione di tutte le origini dati
* aggiunta di un nodo per agevolare la scansione di una specifica origine dati o di un gruppo specifico di origini dati (in genere in base alla posizione)


Per impostazione predefinita, i nuovi nodi dello scanner aggiunti vengono aggiunti al pool generale di risorse di scansione. Questo è chiamato "gruppo scanner predefinito". Nell'immagine riportata di seguito, sono presenti 1 nodo Manager e 3 nodi scanner nel gruppo "default" che sono tutti dati di scansione da tutte e 6 le origini dati.

image:diagram_onprem_scanner_groups_default.png["Un diagramma di come gli scanner di classificazione BlueXP eseguono la scansione delle origini dati quando si trovano nel gruppo di scanner predefinito."]

Se si desidera eseguire la scansione di determinate origini dati da parte di nodi scanner fisicamente più vicini alle origini dati, è possibile definire un nodo scanner o un gruppo di nodi scanner per eseguire la scansione di una specifica origine dati o di un gruppo di origini dati. Nell'immagine seguente sono presenti 1 nodo Manager e 3 nodi scanner.

* Il nodo Manager si trova nel gruppo "default" e sta eseguendo la scansione di un'origine dati
* Il nodo scanner 1 si trova nel gruppo "united_states" e sta eseguendo la scansione di 2 origini dati
* I nodi scanner 2 e 3 fanno parte del gruppo "europa" e condividono le attività di scansione per 3 origini dati


image:diagram_onprem_scanner_groups.png["Un diagramma di come gli scanner di classificazione BlueXP eseguono la scansione delle origini dati quando vengono assegnati a diversi gruppi di scanner."]

I gruppi di scanner di classificazione BlueXP possono essere definiti come aree geografiche separate in cui sono memorizzati i dati. È possibile implementare più nodi scanner di classificazione BlueXP in tutto il mondo e scegliere un gruppo di scanner per ciascun nodo. In questo modo, ciascun nodo dello scanner eseguirà la scansione dei dati più vicini. Più vicino è il nodo dello scanner ai dati, meglio è perché riduce il più possibile la latenza di rete durante la scansione dei dati.

È possibile scegliere i gruppi di scanner da aggiungere alla classificazione BlueXP ed è possibile sceglierne i nomi. La classificazione BlueXP non impone l'implementazione in Europa di un nodo mappato a un gruppo di scanner denominato "europa".

Seguire questi passaggi per installare altri nodi scanner di classificazione BlueXP:

. Preparare i sistemi host Linux che fungeranno da nodi scanner
. Scarica il software Data Sense su questi sistemi Linux
. Eseguire un comando sul nodo Manager per identificare i nodi scanner
. Seguire la procedura per implementare il software sui nodi scanner (e, facoltativamente, definire un "gruppo scanner" per alcuni nodi scanner)
. Se è stato definito un gruppo di scanner, nel nodo Manager:
+
.. Aprire il file "Working_Environment_to_scanner_group_config.yml" e definire gli ambienti di lavoro che verranno sottoposti a scansione da ciascun gruppo di scanner
.. Eseguire il seguente script per registrare queste informazioni di mappatura con tutti i nodi scanner: `update_we_scanner_group_from_config_file.sh`




.Di cosa hai bisogno
* Verificare che tutti i sistemi Linux per i nodi scanner soddisfino il <<Preparare il sistema host Linux,requisiti dell'host>>.
* Verificare che sui sistemi siano installati i due pacchetti software prerequisiti (Docker Engine e Python 3).
* Assicurarsi di disporre dei privilegi di root sui sistemi Linux.
* Verificare che l'ambiente soddisfi i requisiti <<Abilitare l'accesso a Internet in uscita dalla classificazione BlueXP,permessi e connettività>>.
* È necessario disporre degli indirizzi IP degli host del nodo scanner che si stanno aggiungendo.
* È necessario disporre dell'indirizzo IP del sistema host del nodo BlueXP Classification Manager
* È necessario disporre dell'indirizzo IP o del nome host del sistema di connessione, dell'ID account NetApp, dell'ID client del connettore e del token di accesso dell'utente. Se si intende utilizzare gruppi di scanner, è necessario conoscere l'ID dell'ambiente di lavoro per ciascuna origine dati nell'account. Per ottenere queste informazioni, vedere *_Prerequisite Steps_* di seguito.
* Su tutti gli host devono essere attivati i seguenti protocolli e porte:
+
[cols="15,20,55"]
|===
| Porta | Protocolli | Descrizione 


| 2377 | TCP | Comunicazioni per la gestione del cluster 


| 7946 | TCP, UDP | Comunicazione tra nodi 


| 4789 | UDP | Sovrapporre il traffico di rete 


| 50 | ESP | Traffico ESP (Encrypted IPSec Overlay Network) 


| 111 | TCP, UDP | Server NFS per la condivisione dei file tra gli host (necessario da ciascun nodo scanner al nodo manager) 


| 2049 | TCP, UDP | Server NFS per la condivisione dei file tra gli host (necessario da ciascun nodo scanner al nodo manager) 
|===
* Se si utilizza `firewalld` Sulle macchine di classificazione BlueXP, si consiglia di attivarlo prima di installare la classificazione BlueXP. Eseguire i seguenti comandi per configurare `firewalld` In modo che sia compatibile con la classificazione BlueXP:
+
....
firewall-cmd --permanent --add-service=http
firewall-cmd --permanent --add-service=https
firewall-cmd --permanent --add-port=80/tcp
firewall-cmd --permanent --add-port=8080/tcp
firewall-cmd --permanent --add-port=443/tcp
firewall-cmd --permanent --add-port=2377/tcp
firewall-cmd --permanent --add-port=7946/udp
firewall-cmd --permanent --add-port=7946/tcp
firewall-cmd --permanent --add-port=4789/udp
firewall-cmd --reload
....
+
Tenere presente che è necessario riavviare Docker ogni volta che si attiva o si aggiorna `firewalld` impostazioni.



.Fasi preliminari
Seguire questa procedura per ottenere l'ID account NetApp, l'ID client del connettore, il nome del server del connettore e il token di accesso dell'utente necessari per aggiungere i nodi dello scanner.

. Dalla barra dei menu di BlueXP, fare clic su *account > Gestisci account*.
+
image:screenshot_account_id.png["Una schermata dei dettagli dell'account BlueXP."]

. Copia l' _ID account_.
. Dalla barra dei menu di BlueXP, fare clic su *Help > Support > BlueXP Connector*.
+
image:screenshot_connector_client_id.png["Una schermata delle impostazioni di configurazione di BlueXP Connector."]

. Copiare il connettore _ID client_ e il _Nome server_.
. Se si intende utilizzare gruppi di scanner, dalla scheda Configurazione classificazione BlueXP, copiare l'ID dell'ambiente di lavoro per ciascun ambiente di lavoro che si desidera aggiungere a un gruppo di scanner.
+
image:screenshot_work_env_id.png["Una schermata dell'ID dell'ambiente di lavoro dalla pagina di configurazione della classificazione BlueXP."]

. Accedere alla https://services.cloud.netapp.com/developer-hub["API Documentation Developer Hub"^] E fare clic su *Scopri come autenticare*.
+
image:screenshot_client_access_token.png["Una schermata della pagina documentazione API, con un link alle istruzioni di autenticazione."]

. Seguire le istruzioni di autenticazione, utilizzando il nome utente e la password dell'account admin nei parametri "Username" (Nome utente) e "password".
. Quindi, copiare il _token di accesso_ dalla risposta.


.Fasi
. Nel nodo di gestione della classificazione BlueXP, eseguire lo script "add_scanner_node.sh". Ad esempio, questo comando aggiunge 2 nodi scanner:
+
`sudo ./add_scanner_node.sh -a <account_id> -c <client_id> -m <cm_host> -h <ds_manager_ip> *-n <node_private_ip_1,node_private_ip_2>* -t <user_token>`

+
Valori variabili:

+
** _Account_id_ = ID account NetApp
** _Client_id_ = ID client del connettore (aggiungere il suffisso "client" all'ID client copiato nei passaggi del prerequisito)
** _Cm_host_ = indirizzo IP o nome host del sistema di connessione
** _Ds_manager_ip_ = Indirizzo IP privato del sistema di nodi BlueXP Classification Manager
** _Node_private_ip_ = indirizzi IP dei sistemi a nodi scanner di classificazione BlueXP (gli IP di più nodi scanner sono separati da una virgola)
** _User_token_ = token di accesso utente JWT


. Prima del completamento dello script add_scanner_node, viene visualizzata una finestra di dialogo con il comando di installazione necessario per i nodi dello scanner. Copiare il comando (ad esempio: `sudo ./node_install.sh -m 10.11.12.13 -t ABCDEF1s35212 -u red95467j`) e salvarlo in un file di testo.
. Su *ciascun* host nodo scanner:
+
.. Copiare il file di installazione di Data Sense (*DATASENSE-INSTALLER-<version>.tar.gz*) sul computer host (utilizzando `scp` o qualche altro metodo).
.. Decomprimere il file di installazione.
.. Incollare ed eseguire il comando copiato al punto 2.
.. Se si desidera aggiungere un nodo scanner in un "gruppo scanner", aggiungere il parametro *-r <scanner_group_name>* al comando. In caso contrario, il nodo scanner viene aggiunto al gruppo "default".
+
Quando l'installazione termina su tutti i nodi dello scanner e sono stati Uniti al nodo manager, termina anche lo script "add_scanner_node.sh". L'installazione può richiedere da 10 a 20 minuti.



. Se sono stati aggiunti nodi scanner in un gruppo di scanner, tornare al nodo Manager ed eseguire le seguenti 2 operazioni:
+
.. Aprire il file "/opt/netapp/Datasense/Working_Environment_to_scanner_group_config.yml" e immettere la mappatura per cui i gruppi di scanner eseguiranno la scansione di ambienti di lavoro specifici. È necessario disporre dell' _ID ambiente di lavoro_ per ogni origine dati. Ad esempio, le seguenti voci aggiungono 2 ambienti di lavoro al gruppo scanner "europa" e 2 al gruppo scanner "stati_uniti":
+
....
scanner_groups:
 europe:
   working_environments:
     - "working_environment_id1"
     - "working_environment_id2"
 united_states:
   working_environments:
     - "working_environment_id3"
     - "working_environment_id4"
....
+
Tutti gli ambienti di lavoro non aggiunti all'elenco vengono sottoposti a scansione dal gruppo "predefinito". Nel gruppo "predefinito" deve essere presente almeno un nodo del gestore o dello scanner.

.. Eseguire il seguente script per registrare queste informazioni di mappatura con tutti i nodi scanner:
`/opt/netapp/Datasense/tools/update_we_scanner_group_from_config_file.sh`




.Risultato
La classificazione BlueXP viene impostata con Manager e scanner Node per eseguire la scansione di tutte le origini dati.

.Cosa c'è di nuovo
Dalla pagina di configurazione è possibile selezionare le origini dati da sottoporre a scansione, se non è già stato fatto. Se sono stati creati gruppi scanner, ogni origine dati viene sottoposta a scansione dai nodi scanner del rispettivo gruppo.

Il nome del gruppo di scanner per ciascun ambiente di lavoro viene visualizzato nella pagina di configurazione.

image:screenshot_work_env_id.png["Una schermata dell'ID dell'ambiente di lavoro dalla pagina di configurazione della classificazione BlueXP."]

È inoltre possibile visualizzare l'elenco di tutti i gruppi di scanner, l'indirizzo IP e lo stato di ciascun nodo dello scanner nel gruppo nella parte inferiore della pagina di configurazione.

image:screenshot_scanner_groups.png["Una schermata in cui sono elencati tutti i gruppi di scanner e l'indirizzo IP di ciascun nodo dello scanner del gruppo."]

È possibile link:task-licensing-datasense.html["Impostare la licenza per la classificazione BlueXP"] a questo punto. Non ti verrà addebitato alcun costo fino al termine della prova gratuita di 30 giorni.



=== Installazione multi-host per configurazioni di grandi dimensioni

Per configurazioni molto grandi in cui si eseguono scansioni di petabyte di dati, è possibile includere più host per fornire ulteriore potenza di elaborazione. Quando si utilizzano più sistemi host, il sistema primario è denominato _nodo Manager_ e i sistemi aggiuntivi che forniscono potenza di elaborazione aggiuntiva sono denominati _nodi scanner_.

Seguire questi passaggi quando si installa il software di classificazione BlueXP su più host on-premise contemporaneamente. Tenere presente che non è possibile utilizzare "gruppi di scanner" quando si implementano più host in questo modo.

.Di cosa hai bisogno
* Verificare che tutti i sistemi Linux per i nodi Manager e scanner soddisfino il <<Preparare il sistema host Linux,requisiti dell'host>>.
* Verificare che sui sistemi siano installati i due pacchetti software prerequisiti (Docker o Podman Engine e Python 3).
* Assicurarsi di disporre dei privilegi di root sui sistemi Linux.
* Verificare che l'ambiente soddisfi i requisiti <<Abilitare l'accesso a Internet in uscita dalla classificazione BlueXP,permessi e connettività>>.
* È necessario disporre degli indirizzi IP degli host dei nodi dello scanner che si intende utilizzare.
* Su tutti gli host devono essere attivati i seguenti protocolli e porte:
+
[cols="15,20,55"]
|===
| Porta | Protocolli | Descrizione 


| 2377 | TCP | Comunicazioni per la gestione del cluster 


| 7946 | TCP, UDP | Comunicazione tra nodi 


| 4789 | UDP | Sovrapporre il traffico di rete 


| 50 | ESP | Traffico ESP (Encrypted IPSec Overlay Network) 


| 111 | TCP, UDP | Server NFS per la condivisione dei file tra gli host (necessario da ciascun nodo scanner al nodo manager) 


| 2049 | TCP, UDP | Server NFS per la condivisione dei file tra gli host (necessario da ciascun nodo scanner al nodo manager) 
|===


.Fasi
. Seguire i passi da 1 a 7 dal <<Installazione a host singolo per configurazioni tipiche,Installazione su host singolo>> sul nodo manager.
. Come illustrato nel passaggio 8, quando richiesto dal programma di installazione, è possibile immettere i valori richiesti in una serie di prompt oppure fornire i parametri richiesti come argomenti della riga di comando al programma di installazione.
+
Oltre alle variabili disponibili per un'installazione a singolo host, viene utilizzata una nuova opzione *-n <node_ip>* per specificare gli indirizzi IP dei nodi dello scanner. Gli IP di più nodi dello scanner sono separati da una virgola.

+
Ad esempio, questo comando aggiunge 3 nodi scanner:
`sudo ./install.sh -a <account_id> -c <client_id> -t <user_token> --host <ds_host> --manager-host <cm_host> *-n <node_ip1>,<node_ip2>,<node_ip3>* --proxy-host <proxy_host> --proxy-port <proxy_port> --proxy-scheme <proxy_scheme> --proxy-user <proxy_user> --proxy-password <proxy_password>`

. Prima del completamento dell'installazione del nodo manager, viene visualizzata una finestra di dialogo con il comando di installazione necessario per i nodi dello scanner. Copiare il comando (ad esempio, `sudo ./node_install.sh -m 10.11.12.13 -t ABCDEF-1-3u69m1-1s35212`) e salvarlo in un file di testo.
. Su *ciascun* host nodo scanner:
+
.. Copiare il file di installazione di Data Sense (*DATASENSE-INSTALLER-<version>.tar.gz*) sul computer host (utilizzando `scp` o qualche altro metodo).
.. Decomprimere il file di installazione.
.. Incollare ed eseguire il comando copiato al punto 3.
+
Una volta completata l'installazione su tutti i nodi dello scanner e collegati al nodo manager, l'installazione del nodo manager viene completata.





.Risultato
Il programma di installazione della classificazione BlueXP completa l'installazione dei pacchetti e registra l'installazione. L'installazione può richiedere da 10 a 20 minuti.

.Cosa c'è di nuovo
Dalla pagina di configurazione è possibile selezionare le origini dati da sottoporre a scansione.

Puoi anche farlo link:task-licensing-datasense.html["Impostare la licenza per la classificazione BlueXP"] a questo punto. Non ti verrà addebitato alcun costo fino al termine della prova gratuita di 30 giorni.
